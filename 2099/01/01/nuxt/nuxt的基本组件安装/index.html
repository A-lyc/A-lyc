<!DOCTYPE html>
<html>
<head>
    

    

    
<!-- Baidu Tongji -->
<script>var _hmt = _hmt || []</script>
<script async src="//hm.baidu.com/hm.js?502a249bf91aa7bc75f321292b2295fe"></script>
<!-- End Baidu Tongji -->




    <meta charset="utf-8">
    <meta name="sogou_site_verification" content="pGzFNVpJoz"/>
    
    
    <meta name="sogou_site_verification" content="true">
    
    
    
    <title>nuxt的基本组件安装 | 四叶草的个人博客 | 联系方式：15854388082</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="nuxt的使用 nuxt的基本组件安装">
    <meta name="description" content="中途的bug 一定熟练使用element有很大的帮助">
<meta property="og:type" content="article">
<meta property="og:title" content="nuxt的基本组件安装">
<meta property="og:url" content="https://a-lyc.github.io/2099/01/01/nuxt/nuxt%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85/index.html">
<meta property="og:site_name" content="四叶草的个人博客">
<meta property="og:description" content="中途的bug 一定熟练使用element有很大的帮助">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2099-01-01T02:58:16.000Z">
<meta property="article:modified_time" content="2021-06-08T01:30:55.908Z">
<meta property="article:author" content="四叶草">
<meta property="article:tag" content="nuxt的使用 nuxt的基本组件安装">
<meta name="twitter:card" content="summary">
    
        <link rel="alternate" type="application/atom+xml" title="四叶草的个人博客" href="/A-lyc/atom.xml">
    
    <link rel="shortcut icon" href="/A-lyc/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?502a249bf91aa7bc75f321292b2295fe";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu"  >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/A-lyc/img/brand.jpg)">
      <div class="brand">
        <a href="/A-lyc/" class="avatar waves-effect waves-circle waves-light">
          <img src="/A-lyc/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">四叶草</h5>
          <a href="mailto:2294016229@qq.com" title="2294016229@qq.com" class="mail">2294016229@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/A-lyc/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/A-lyc/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/A-lyc/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                目录
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/A-lyc/about"  >
                <i class="icon icon-lg icon-link"></i>
                个人简历
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/A-lyc/production" target="_blank" >
                <i class="icon icon-lg icon-id-badge"></i>
                作品集
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/A-lyc/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                历史
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">nuxt的基本组件安装</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">nuxt的基本组件安装</h1>
        <h5 class="subtitle">
            
                <time datetime="2099-01-01T02:58:16.000Z" itemprop="datePublished" class="page-time">
  2099-01-01
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/A-lyc/categories/Nuxt/">Nuxt</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#自己初始化的nuxt的模板文件"><span class="post-toc-number">1.</span> <span class="post-toc-text">自己初始化的nuxt的模板文件</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1：安装"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">1：安装</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#配置nuxt-config-js"><span class="post-toc-number">2.</span> <span class="post-toc-text">配置nuxt.config.js</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#获取win"><span class="post-toc-number">3.</span> <span class="post-toc-text">获取win</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#layouts文件夹"><span class="post-toc-number">4.</span> <span class="post-toc-text">layouts文件夹</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#自定义页面布局"><span class="post-toc-number">5.</span> <span class="post-toc-text">自定义页面布局</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#错误页面的定义"><span class="post-toc-number">6.</span> <span class="post-toc-text">错误页面的定义</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#关于页面的"><span class="post-toc-number">7.</span> <span class="post-toc-text">关于页面的</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#asyncData-fetch"><span class="post-toc-number">8.</span> <span class="post-toc-text">asyncData,fetch</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#fetch-方法"><span class="post-toc-number">9.</span> <span class="post-toc-text">fetch 方法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#网络请求-中间件-用户管理，获取token-可以不进行使用"><span class="post-toc-number">10.</span> <span class="post-toc-text">网络请求 - 中间件 - 用户管理，获取token - 可以不进行使用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#封装"><span class="post-toc-number">10.1.</span> <span class="post-toc-text">封装</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#中间件-官网说明"><span class="post-toc-number">11.</span> <span class="post-toc-text">中间件 - 官网说明</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#axios网络请求-https-zh-nuxtjs-org-guide-async-data"><span class="post-toc-number">12.</span> <span class="post-toc-text">axios网络请求 - https:&#x2F;&#x2F;zh.nuxtjs.org&#x2F;guide&#x2F;async-data</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#vuex获取用户信息"><span class="post-toc-number">13.</span> <span class="post-toc-text">vuex获取用户信息</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#路由"><span class="post-toc-number">14.</span> <span class="post-toc-text">路由</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#路由问题"><span class="post-toc-number">14.1.</span> <span class="post-toc-text">路由问题</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#动态路由"><span class="post-toc-number">14.2.</span> <span class="post-toc-text">动态路由</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#插件使用"><span class="post-toc-number">15.</span> <span class="post-toc-text">插件使用</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#新建一个isMobile-js文件，路径自选，我的路径是-static-js-isMobile-js"><span class="post-toc-number">16.</span> <span class="post-toc-text">新建一个isMobile.js文件，路径自选，我的路径是&#x2F;static&#x2F;js&#x2F;isMobile.js</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#在nuxt-config-js加上对应配置"><span class="post-toc-number">17.</span> <span class="post-toc-text">在nuxt.config.js加上对应配置</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#打包整理服务器端上线"><span class="post-toc-number">18.</span> <span class="post-toc-text">打包整理服务器端上线</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#富文本安装和图片裁切-最好安装element"><span class="post-toc-number">19.</span> <span class="post-toc-text">富文本安装和图片裁切 - 最好安装element</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#百度地图的使用"><span class="post-toc-number">20.</span> <span class="post-toc-text">百度地图的使用</span></a></li></ol>
        </nav>
    </aside>


<article id="post-nuxt/nuxt的基本组件安装"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">nuxt的基本组件安装</h1>
        <div class="post-meta">
            <time class="post-time" title="2099-01-01 10:58:16" datetime="2099-01-01T02:58:16.000Z"  itemprop="datePublished">2099-01-01</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/A-lyc/categories/Nuxt/">Nuxt</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <hr>
<p>中途的bug 一定熟练使用element有很大的帮助</p>
<a id="more"></a>
<p>0：上传服务器运行 - 服务器有缓存问题，把自身的缓存关闭，之后开启服务端缓存，期间有很多bug<br>1：状态存储到vuex中会使网页分享的时候带有用户的token，所以这个token需要在浏览器中获取之后发送网络请求，不要在vuex直接获取发送请求，会有bug<br>2：vuex有的时候进入页面点击刷新的时候很多东西没有了，因为存储的状态管理没有了，所以导致显示或者不显示的问题，等等，如果用户的话，这个还是判断浏览器中的token有没有，在使用浏览器的token获取用户信息，之后在进行判断，以防刷新之后不显示问题<br>3：页面数据加载不出来：因为没有正确使用asyncData数据请求，或者axios写错了位置，应该在插件目录下<br>4：vuex中nuxtServerInit的使用， mutations内使用大写TOKEN(){},之操作一件事情<br>5：nuxt使用node_mode中的axios的时候会报错官方解释是，所以尽量使用自己带的axios<br>6：上传之前需要把debug: process.env._ENV == ‘production’ ? false : true, 关闭注释掉这个是检查debug模式<br>如果您的项目中直接使用了node_modules中的axios，并且使用axios.interceptors添加拦截器对请求或响应数据进行了处理，确保使用 axios.create创建实例后再使用。否则多次刷新页面请求服务器，服务端渲染会重复添加拦截器，导致数据处理错误。</p>
<hr>
<h3 id="自己初始化的nuxt的模板文件"><a href="#自己初始化的nuxt的模板文件" class="headerlink" title="自己初始化的nuxt的模板文件"></a>自己初始化的nuxt的模板文件</h3><p><a href="./template.zip" target="_blank"> template自己定义模板 </a></p>
<h4 id="1：安装"><a href="#1：安装" class="headerlink" title="1：安装"></a>1：安装</h4><p>npx create-nuxt-app <project-name><br>cd <project-name><br>进入环境命令：<br>npm run dev<br>打包编译<br>npm run dev<br>之后生成 dist（vue）和.nuxt（服务器:如果用中间件需要把中间件的文件一起打包发给后端，基本文件：.nuxt,state,nuxt.confige.js,package.json）<br>npm i 之后 npm start - 项目可以跑起来了</project-name></project-name></p>
<p>首先新建项目安装完成npm和node，使用脚手架的命令去新建一个初始化的项目，我基本使用的是npm进行安装，输入命令行就可<br>npx create-nuxt-app &lt;项目名&gt;<br>选择默认初始化的项目名称，比如选择UI框架，安装axios，选择渲染方式，之后下一步下一步即可<br>npm run dev即可进入开发环境<br>页面内网络请求获取的数据使用asyncData获取，下面会有介绍<br>点击动作请求数据可使用插件导出的网络请求，下面有介绍 this.$api.getInfo()<br>使用cscc选要提前安装 npm install –save-dev node-sass sass-loader</p>
<!-- more -->

<h3 id="配置nuxt-config-js"><a href="#配置nuxt-config-js" class="headerlink" title="配置nuxt.config.js"></a>配置nuxt.config.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  mode: <span class="string">'universal'</span>,</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  * 头部显示区域 - 页面组件内可以使用</span></span><br><span class="line"><span class="comment">  *  head()&#123;return&#123;title:'',</span></span><br><span class="line"><span class="comment">  *  meta:[&#123;hid: '网站描述',name: 'description',content:''&#125;]&#125;&#125;</span></span><br><span class="line"><span class="comment">  *  来重定义头部标签</span></span><br><span class="line"><span class="comment">  *  </span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  head: &#123;</span><br><span class="line">    title: <span class="string">'头部标题'</span> || <span class="string">''</span>,<span class="comment">//</span></span><br><span class="line">    meta: [</span><br><span class="line">      &#123; <span class="attr">charset</span>: <span class="string">'utf-8'</span> &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        content: <span class="string">`viewport, width=device-width, initial-scale=1, </span></span><br><span class="line"><span class="string">minimum-scale=1.0,maximum-scale=1.0,user-scalable=no`</span></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">    ],</span><br><span class="line">    link: [<span class="comment">//使用到的css可以使用link标签引入</span></span><br><span class="line">      &#123; <span class="attr">rel</span>: <span class="string">'icon'</span>, <span class="attr">type</span>: <span class="string">'image/x-icon'</span>, <span class="attr">href</span>: <span class="string">'/favicon.ico'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">href</span>: <span class="string">'https://static.com/css/index.css'</span>, <span class="attr">rel</span>: <span class="string">'stylesheet'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">href</span>: <span class="string">'https://static.com/css/bootstrap.min.css'</span>, <span class="attr">rel</span>: <span class="string">'stylesheet'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">href</span>: <span class="string">'https://static.com/css/bootstrap-vue.min.css'</span>, <span class="attr">rel</span>: <span class="string">'stylesheet'</span> &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  ** loading的颜色</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  loading: &#123; <span class="attr">color</span>: <span class="string">'#000'</span> &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 新加导入scss - 需要提前安装 npm install --save-dev node-sass sass-loader</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  styleResources: &#123;</span><br><span class="line">    scss: <span class="string">'@/assets/style/global.scss'</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  **  外部导入的css可以直接在这显示，查看源码的时候会直接显示到页面上的</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  css: [</span><br><span class="line">    <span class="comment">// 'element-ui/lib/theme-chalk/index.css'</span></span><br><span class="line">    <span class="comment">// '@/assets/css/main.scss'</span></span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  ** 插件配置目录，安装的插件都需要在这个位置配置，有的插件需要获取dom后者win</span></span><br><span class="line"><span class="comment">  ** 建议安装插件的时候全局安装 &#123; src: '@/plugins/map', ssr: false &#125;,可以获取dom后者win</span></span><br><span class="line"><span class="comment">  ** 这样即可使用的时候之间按照官网的文档标签使用即可</span></span><br><span class="line"><span class="comment">  ** 插件不单独使用的是因为需要获取dom和win的原因</span></span><br><span class="line"><span class="comment">  ** '@/plugins/api'  api是封装的网络请求，下面会解释到的</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="string">'@/plugins/element-ui'</span>,<span class="comment">//element</span></span><br><span class="line">    <span class="string">'@/plugins/api'</span>,<span class="comment">//封装的axios</span></span><br><span class="line">    <span class="string">'@/plugins/bootstrap-vue'</span>,<span class="comment">//栅格</span></span><br><span class="line">    <span class="string">'@/plugins/vue-moment'</span>,<span class="comment">//格式化时间</span></span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">'@/plugins/map'</span>, <span class="attr">ssr</span>: <span class="literal">false</span> &#125;,<span class="comment">//地图</span></span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">'@/plugins/vue-quill-editor'</span>, <span class="attr">ssr</span>: <span class="literal">false</span> &#125;,<span class="comment">//富文本</span></span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">'@/plugins/vue-cropper'</span>, <span class="attr">ssr</span>: <span class="literal">false</span> &#125;,<span class="comment">//裁切</span></span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">'@/plugins/md5'</span>, <span class="attr">ssr</span>: <span class="literal">false</span> &#125;<span class="comment">//md5加密</span></span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  ** Nuxt.js dev-modules</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  buildModules: [],</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  ** Nuxt.js modules - 请求需要</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  modules: [</span><br><span class="line">    <span class="comment">// Doc: https://axios.nuxtjs.org/usage</span></span><br><span class="line"><span class="comment">//没有的话都需要安装</span></span><br><span class="line">    <span class="string">'@nuxtjs/axios'</span>,</span><br><span class="line">    <span class="string">'@gauseen/nuxt-proxy'</span>,</span><br><span class="line">    <span class="string">'@nuxtjs/style-resources'</span>,</span><br><span class="line">    <span class="comment">//缓存</span></span><br><span class="line">    <span class="comment">// '@nuxtjs/component-cache',</span></span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  ** Axios 配置跨域的问题，外部使用 /api/</span></span><br><span class="line"><span class="comment">  ** See https://axios.nuxtjs.org/options</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  axios: &#123;</span><br><span class="line">    prefix: <span class="string">'/api/'</span>,</span><br><span class="line">    <span class="comment">//是否允许跨域</span></span><br><span class="line">    proxy: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 最多重发三次</span></span><br><span class="line">    retry: &#123; <span class="attr">retries</span>: <span class="number">5</span> &#125;,</span><br><span class="line">    <span class="comment">//开发模式下开启debug</span></span><br><span class="line">    debug: process.env._ENV == <span class="string">'production'</span> ? <span class="literal">false</span> : <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">//设置不同环境的请求地址</span></span><br><span class="line">    baseURL:</span><br><span class="line">      process.env._ENV == <span class="string">'production'</span></span><br><span class="line">        ? <span class="string">'http://localhost:3000/api'</span></span><br><span class="line">        : <span class="string">'http://localhost:3000/api'</span>,</span><br><span class="line">    <span class="comment">//是否是可信任</span></span><br><span class="line">    withCredentials: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"><span class="comment">//切换网页url不正确 - 具体是意思不明</span></span><br><span class="line">  publicRuntimeConfig: &#123;</span><br><span class="line">    axios: &#123;</span><br><span class="line">      browserBaseURL: process.env.BROWSER_BASE_URL</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"><span class="comment">//切换网页url不正确 - 具体是意思不明</span></span><br><span class="line">  privateRuntimeConfig: &#123;</span><br><span class="line">    axios: &#123;</span><br><span class="line">      baseURL: process.env.BASE_URL</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 代理服务器</span></span><br><span class="line">  proxyTable: &#123;</span><br><span class="line">    <span class="string">'/api/'</span>: &#123;</span><br><span class="line">      target: <span class="string">'https://www.baidu.com/api'</span>,  <span class="comment">// 线上地址</span></span><br><span class="line">      pathRewrite: &#123; <span class="string">'^/api/'</span>: <span class="string">''</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  ** Build configuration</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  build: &#123;</span><br><span class="line">    transpile: [<span class="regexp">/^element-ui/</span>],</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    ** You can extend webpack config here</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    extend( config, &#123; isDev, isClient &#125;) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 中间件</span></span><br><span class="line">  serverMiddleware: [</span><br><span class="line">    <span class="string">'~/middleware/cookie.js'</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="获取win"><a href="#获取win" class="headerlink" title="获取win"></a>获取win</h3><p>if (process.browser) {<br> 逻辑<br>}</p>
<h3 id="layouts文件夹"><a href="#layouts文件夹" class="headerlink" title="layouts文件夹"></a>layouts文件夹</h3><p>layouts文件夹：是放置内容的，公共的部分可以在这个位置去引入一个组件，公共的头，footer等<br>错误页也是在此文件夹内，error.vue,官网有详细写法<br>这里定义的东西是全局都使用的，慎用</p>
<h3 id="自定义页面布局"><a href="#自定义页面布局" class="headerlink" title="自定义页面布局"></a>自定义页面布局</h3><p>在layouts中定义一个页面比如cishi.vue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      layouts</span><br><span class="line">      &lt;nuxt&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#39;ceshi&#39;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p>如何使用呢，在page文件内的.vue文件内加入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">  asdsadas</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    layout: &#39;ceshi&#39;, &#x2F;&#x2F;重要的是这个代码和上面定义的页面相关联</span><br><span class="line">    name: &#39;ceshi&#39;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="错误页面的定义"><a href="#错误页面的定义" class="headerlink" title="错误页面的定义"></a>错误页面的定义</h3><p>举一个个性化错误页面的例子 layouts/error.vue:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;container&quot;&gt;</span><br><span class="line">    &lt;h1 v-if&#x3D;&quot;error.statusCode &#x3D;&#x3D;&#x3D; 404&quot;&gt;页面不存在&lt;&#x2F;h1&gt;</span><br><span class="line">    &lt;h1 v-else&gt;应用发生错误异常&lt;&#x2F;h1&gt;</span><br><span class="line">    &lt;nuxt-link to&#x3D;&quot;&#x2F;&quot;&gt;首 页&lt;&#x2F;nuxt-link&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: [&#39;error&#39;],</span><br><span class="line">  layout: &#39;blog&#39; &#x2F;&#x2F; 你可以为错误页面指定自定义的布局</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="关于页面的"><a href="#关于页面的" class="headerlink" title="关于页面的"></a>关于页面的</h3><p>页面组件实际上是 Vue 组件，只不过 Nuxt.js 为这些组件添加了一些特殊的配置项（对应 Nuxt.js 提供的功能特性）以便你能快速开发通用应用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1 class&#x3D;&quot;red&quot;&gt;Hello &#123;&#123; name &#125;&#125;!&lt;&#x2F;h1&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">&#x2F;&#x2F; 每次在加载组件之前调用 - 初始加载数据在这位置请求，（动作方法不在这）</span><br><span class="line">  asyncData (context) &#123;return &#123; name: &#39;World&#39; &#125;&#125;,</span><br><span class="line">  fetch () &#123;&#125;,&#x2F;&#x2F; fetch方法用于在呈现页面之前填充存储</span><br><span class="line">  head () &#123;&#125;,&#x2F;&#x2F; 为此页设置元标记</span><br><span class="line">  layout()&#123;&#125;,&#x2F;&#x2F;指定当前页面使用的布局（layouts 根目录下的布局文件）</span><br><span class="line">  middleware()&#123;&#125;,&#x2F;&#x2F;中间件</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.red &#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="asyncData-fetch"><a href="#asyncData-fetch" class="headerlink" title="asyncData,fetch"></a>asyncData,fetch</h3><p>这里需要一个axios请求，等会会写道如何进行网络请求,需要服务器端加载的数据支持seo优化的信息要全部渲染到这个位置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这里接收一个上下文的对象；app//可以结构出stort，和自定义的插件内导出全局的方法，route//路由，params//路由参数，query，req，res，等等。见网址：https://www.nuxtjs.cn/api/context</span></span><br><span class="line"><span class="keyword">async</span> asyncData (&#123;app&#125;) &#123;<span class="comment">//结构app进来</span></span><br><span class="line">      <span class="keyword">let</span> &#123;$api&#125; = app<span class="comment">//app进行结构初api全局暴漏的一个api的方法，请求中自己封装的</span></span><br><span class="line">      <span class="comment">// 下面试简单的axios请求，安装axios即可使用 </span></span><br><span class="line">      <span class="keyword">let</span> &#123; data &#125; = <span class="keyword">await</span> axios.get(<span class="string">'https://www.baidu.com/api/v1/config-info'</span>)</span><br><span class="line"></span><br><span class="line">      <span class="comment">//使用 Promise.all 结果是个数组$api.getHotType(id1[0].class_id)</span></span><br><span class="line">      <span class="keyword">let</span> obj = <span class="keyword">await</span> <span class="built_in">Promise</span>.all([ $api.getHotType(id1[<span class="number">0</span>].class_id) , $api.getHotType(id1[<span class="number">1</span>].class_id) , $api.getHotType(id1[<span class="number">2</span>].class_id) , $api.getHotType(id1[<span class="number">3</span>].class_id)])</span><br><span class="line">              </span><br><span class="line">      <span class="comment">//请求banner下面的数据 footer上面的 使用封装好的请求content进行接收 - 建议使用结构的方式</span></span><br><span class="line">      <span class="comment">//$api.getListData()后面不要.then,直接结构data即可</span></span><br><span class="line">      <span class="keyword">let</span> &#123;<span class="attr">data</span>:content&#125;  = <span class="keyword">await</span> $api.getListData()</span><br><span class="line">      <span class="keyword">return</span> &#123;<span class="comment">//把数据return出去在template可以直接使用 - 最好在data中处理之后在使用，&lt;div&gt;&#123;&#123;info&#125;&#125;&lt;/div&gt;</span></span><br><span class="line">        info: data.data,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="fetch-方法"><a href="#fetch-方法" class="headerlink" title="fetch 方法"></a>fetch 方法</h3><p>fetch 方法用于在渲染页面前填充应用的状态树（store）数据， 与 asyncData 方法类似，不同的是它不会设置组件的数据。<br>类型： Function<br>如果页面组件设置了 fetch 方法，它会在组件每次加载前被调用（在服务端或切换至目标路由之前）。<br>fetch 方法的第一个参数是页面组件的上下文对象 context，我们可以用 fetch 方法来获取数据填充应用的状态树。为了让获取过程可以异步，你需要返回一个 Promise，Nuxt.js 会等这个 promise 完成后再渲染组件。<br>警告: 您无法在内部使用this获取组件实例，fetch是在组件初始化之前被调用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> fetch (&#123; store, params &#125;)&#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; data &#125; = <span class="keyword">await</span> axios.get(<span class="string">'https://www.baidu.com/stars'</span>)</span><br><span class="line">    store.commit(<span class="string">'setStars'</span>, data)<span class="comment">//给vuex发送一个数据</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h3 id="网络请求-中间件-用户管理，获取token-可以不进行使用"><a href="#网络请求-中间件-用户管理，获取token-可以不进行使用" class="headerlink" title="网络请求 - 中间件 - 用户管理，获取token - 可以不进行使用"></a>网络请求 - 中间件 - 用户管理，获取token - 可以不进行使用</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install js-cookie --save</span><br></pre></td></tr></table></figure>
<p>保存token的插件，可以使用中间件来使用，使用方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Cookies = <span class="built_in">require</span>(<span class="string">"js-cookie"</span>)  </span><br><span class="line"><span class="comment">// 创建一个在整个网站上有效的cookie</span></span><br><span class="line">Cookies.set(<span class="string">'name'</span>, <span class="string">'value'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个从现在起7天到期的cookie，该cookie在整个网站上均有效：</span></span><br><span class="line">Cookies.set(<span class="string">'name'</span>, <span class="string">'value'</span>, &#123; <span class="attr">expires</span>: <span class="number">7</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个有效的cookie，该cookie对当前页面的路径有效：</span></span><br><span class="line">Cookies.set(<span class="string">'name'</span>, <span class="string">'value'</span>, &#123; <span class="attr">expires</span>: <span class="number">7</span>, <span class="attr">path</span>: <span class="string">''</span> &#125;);</span><br></pre></td></tr></table></figure>
<h4 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cookies <span class="keyword">from</span> <span class="string">'js-cookie'</span></span><br><span class="line"><span class="keyword">const</span> TokenKey = <span class="string">'token'</span></span><br><span class="line"><span class="comment">// 获取</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getToken</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> Cookies.get(TokenKey)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 写入</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">setToken</span>(<span class="params">token</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> Cookies.set(TokenKey, token)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 删除</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">removeToken</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> Cookies.remove(TokenKey)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install cookie-parser</span><br></pre></td></tr></table></figure>
<p>首先获取中间件，就是用户登录的时候会把token保存到cookies这里面，之后要获取token活得用户的信息，登录状态等等，<br>安装一个cookies格式化工具方便操作 ：npm i serve cookie-parser 之后在middleware（中间件）这个文件夹内新建文件进行导入<br>我新建的cokie.js 内容是：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports =  <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'-**--*-*-*-*-*-*-*-*'</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'-**--*-*- cookies *-*-*-*-*-*'</span>)</span><br><span class="line">  next()</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>导入npm的之后在nuxt.confige.js中进行导入中间件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 服务器中间件</span></span><br><span class="line"> serverMiddleware: [</span><br><span class="line">   <span class="string">'~/middleware/cookie.js'</span></span><br><span class="line"> ]</span><br></pre></td></tr></table></figure>

<h3 id="中间件-官网说明"><a href="#中间件-官网说明" class="headerlink" title="中间件 - 官网说明"></a>中间件 - 官网说明</h3><p>中间件允许您定义一个自定义函数运行在一个页面或一组页面渲染之前。</p>
<p>每一个中间件应放置在 middleware/ 目录。文件名的名称将成为中间件名称(middleware/auth.js将成为 auth 中间件)。</p>
<p>一个中间件接收 context 作为第一个参数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  context.userAgent = process.server ? context.req.headers[<span class="string">'user-agent'</span>] : navigator.userAgent</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>中间件执行流程顺序：</p>
<p>nuxt.config.js<br>匹配布局<br>匹配页面<br>中间件可以异步执行,只需要返回一个 Promise 或使用第2个 callback 作为第一个参数：</p>
<p>middleware/stats.js</p>
<p>import axios from ‘axios’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">&#123; route &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> axios.post(<span class="string">'http://my-stats-api.com'</span>, &#123;</span><br><span class="line">    url: route.fullPath</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后在你的 nuxt.config.js 、 layouts 或者 pages 中使用中间件:</p>
<p>nuxt.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  router: &#123;</span><br><span class="line">    middleware: <span class="string">'stats'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在，stats 中间件将在每个路由改变时被调用。</p>
<p>您也可以将 middleware 添加到指定的布局或者页面:</p>
<p>pages/index.vue 或者 layouts/default.vue</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  middleware: <span class="string">'stats'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="axios网络请求-https-zh-nuxtjs-org-guide-async-data"><a href="#axios网络请求-https-zh-nuxtjs-org-guide-async-data" class="headerlink" title="axios网络请求 - https://zh.nuxtjs.org/guide/async-data"></a>axios网络请求 - <a href="https://zh.nuxtjs.org/guide/async-data" target="_blank" rel="noopener">https://zh.nuxtjs.org/guide/async-data</a></h3><p>安装axios - npm install @nuxtjs/auth @nuxtjs/axios<br>在plugibns中新建文件api.js之后写入axios的网络请求配置，为什么在plugins中，因为这个位置可以获取到上下文对象，可以结构初store和app，以及获取win和dom<br>别的位置暂时没有找到可以结构出的，所以放在这个插件文件夹下了 - 默认导出的配置</p>
<ul>
<li>全局都可以使用直接在asyncData中$api.getInfo()，在vue其他方法中this.$api.getInfo();<br>inject全局暴漏导出<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> apiAll <span class="keyword">from</span> <span class="string">'../api/apiAll.js'</span><span class="comment">//导入请求的n个地址 地址自定义</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">&#123; app &#125;, inject</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> &#123; store, $axios &#125; = app<span class="comment">//结构出store, $axios - 自带的axios</span></span><br><span class="line">  $axios.defaults.baseUrl = <span class="string">'/api'</span><span class="comment">//设置api，nuxt.confige.js中以解释/api的来历</span></span><br><span class="line">  <span class="comment">/** 拦截请求设置 可以做一些请求之前的操作 token **/</span></span><br><span class="line">  $axios.interceptors.request.use(</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//添加请求的头部，store.state.access_token这个是vuex中保存的token下面会解释到</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//这个位置可以获取浏览器的win所以可以读取token，在请求拦截之前把token添加进去</span></span><br><span class="line">    <span class="comment">//浏览器没有的话，说明不是登录状态，判断用户是否登录</span></span><br><span class="line"><span class="comment">// if (process.browser)&#123;&#125;这个是获取浏览器的win和dom</span></span><br><span class="line">      <span class="keyword">let</span> Token = <span class="string">''</span></span><br><span class="line">      <span class="keyword">if</span> (process.browser) &#123;</span><br><span class="line">        Token = <span class="built_in">window</span>.localStorage.getItem(<span class="string">'token'</span>)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      config.headers[<span class="string">'Authorization'</span>] = <span class="string">'Bearer '</span> + Token</span><br><span class="line">      <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">      <span class="keyword">return</span> config</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 对请求错误做些什么</span></span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line"><span class="comment">// 2.2.响应拦截</span></span><br><span class="line">   $axios.interceptors.response.use(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line"><span class="comment">//获取的数据返回一个data</span></span><br><span class="line">      <span class="keyword">return</span> res.data</span><br><span class="line">    &#125;, err =&gt; &#123;</span><br><span class="line">      <span class="keyword">return</span> err.data</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  inject(<span class="string">'api'</span>, apiAll($axios))<span class="comment">//inject全局暴漏，名字为api 导出的是这个axios</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
apiAll.js  请求集合，自定义的地址，和上面进行对应<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> homev2 <span class="keyword">from</span> <span class="string">'./homev2'</span> <span class="comment">//可以多个文件导入</span></span><br><span class="line"><span class="keyword">import</span> institutionalUserv2 <span class="keyword">from</span> <span class="string">'./institutionalUserv2'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">$axios</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...homev2($axios),<span class="comment">//遍历导入</span></span><br><span class="line">    ...institutionalUserv2($axios)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
homev2的文件:   请求分开的文件<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*url是个字符串可拼接</span></span><br><span class="line"><span class="comment">axios.request(config)</span></span><br><span class="line"><span class="comment">axios.get(url[, config])</span></span><br><span class="line"><span class="comment">axios.delete(url[, config])</span></span><br><span class="line"><span class="comment">axios.head(url[, config])</span></span><br><span class="line"><span class="comment">axios.options(url[, config])</span></span><br><span class="line"><span class="comment">axios.post(url[, data[, config]])</span></span><br><span class="line"><span class="comment">axios.put(url[, data[, config]])</span></span><br><span class="line"><span class="comment">axios.patch(url[, data[, config]])</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">$axios</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取数据</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    getListData () &#123;</span><br><span class="line">      <span class="keyword">return</span> $axios.get(<span class="string">'/v1/index'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  热门分类 /v1/index/hot-type</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    getHotType(id,data) &#123;</span><br><span class="line">      <span class="keyword">return</span>  $axios.post(<span class="string">"/v1/index/hot-type?id="</span> + id,&#123;</span><br><span class="line">        name:data.name</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 传输图片，fil格式，前提提前转froomData格式</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    uImage(data) &#123;</span><br><span class="line">          <span class="keyword">return</span> $axios.post(<span class="string">'/v1/file/images'</span>,data)</span><br><span class="line">        &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="vuex获取用户信息"><a href="#vuex获取用户信息" class="headerlink" title="vuex获取用户信息"></a>vuex获取用户信息</h3><p>如何存储token<br>if(process.browser){//获取浏览器对象cookie<br>  document.cookie = ‘token = ‘ + access_token;<br>}<br>如何清除token<br>var keys = document.cookie.match(/[^ =;]+(?==)/g)<br>if (keys) {<br>  for (var i = keys.length; i–;)<br>    document.cookie = keys[i] + ‘=0;expires=’ + new Date(0).toUTCString()<br>}</p>
<p>window.localStorage.setItem(‘token’,token)//存<br>window.localStorage.getItem(‘token’,token)//取<br>window.localStorage.setItem(‘user’, JSON.stringify(content.data))//json存储<br>JSON.parse(json);　　//解析为JSON对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> state = <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span><br><span class="line">  access_token: <span class="string">''</span>,</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  <span class="comment">//保存access_token</span></span><br><span class="line">  ACCESS_TOKEN(state, playLoad) &#123;</span><br><span class="line">    state.access_token = playLoad</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> actions = &#123;</span><br><span class="line">  <span class="comment">//每次页面加载的时候就会执行这个函数，之后可以获取到cookies保存的值，之后可以保存到vuex中，</span></span><br><span class="line">  <span class="comment">//通过plugins文件新建api文件进行网络请求以及axios的拦截等</span></span><br><span class="line">  <span class="keyword">async</span> nuxtServerInit(&#123; commit &#125;, &#123; req,app &#125;) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> &#123; token &#125; = req.cookies <span class="comment">//用户登录保存token</span></span><br><span class="line">      <span class="keyword">if</span> (token) &#123;<span class="comment">//如果用户登录，这里就是true</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//将token报错到stat中，使用mutations内的commit方法进行保存</span></span><br><span class="line">        commit(<span class="string">'ACCESS_TOKEN'</span>, token)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 网络请求 通过token获取用户信息保存到vuex中去 - 页面刷新会有问题</span></span><br><span class="line">        <span class="keyword">let</span> &#123; data &#125;  = <span class="keyword">await</span> app.$api.getUserInfo(token)</span><br><span class="line">        commit(<span class="string">'USER'</span>, data)</span><br><span class="line">      &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;<span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(e)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h3><p>是根据文件的目录生成的路由_id.vue可以传输路由的参数，如果想有链接的标识，鼠标经过的时候下面显示连接使用标签：<nuxt-link to="/about">关于</nuxt-link></p>
<h4 id="路由问题"><a href="#路由问题" class="headerlink" title="路由问题"></a>路由问题</h4><p>多个路由传参使用_.vue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pages&#x2F;</span><br><span class="line">--| login&#x2F;</span><br><span class="line">-----| _.vue</span><br><span class="line">-----| _log</span><br><span class="line">-------|_.vue</span><br><span class="line">--| index.vue</span><br></pre></td></tr></table></figure>
<p>可以在:to=”login/1/2/3”,如果有子元素的话 :to=”login/1/log/1” 传输多个参数文件夹_这个符号可以动态传参<br>假设pages的目录结构如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pages&#x2F;</span><br><span class="line">--| user&#x2F;</span><br><span class="line">-----| index.vue</span><br><span class="line">-----| one.vue</span><br><span class="line">--| index.vue</span><br></pre></td></tr></table></figure>
<p>那么，Nuxt.js自动生成的路由配置如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">router: &#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">'index'</span>,</span><br><span class="line">      path: <span class="string">'/'</span>,</span><br><span class="line">      component: <span class="string">'pages/index.vue'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">'user'</span>,</span><br><span class="line">      path: <span class="string">'/user'</span>,</span><br><span class="line">      component: <span class="string">'pages/user/index.vue'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">'user-one'</span>,</span><br><span class="line">      path: <span class="string">'/user/one'</span>,</span><br><span class="line">      component: <span class="string">'pages/user/one.vue'</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>你会发现名称为users-id的路由路径带有:id？参数，表示该路由是可选的。原理跟vue动态路由是一致的。<br>   使用跳转的时候都是用nuxt-link或者this.$router.push({path:’’})，这样的话可以使用vuex</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">nuxt-link</span> <span class="attr">:to</span>=<span class="string">"'/users/' + id?name='四叶草'"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">nuxt-link</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h4><p>在Nuxt.js里面定义带参数的动态路由，需要创建对应的以下划线作为前缀的Vue文件或目录。<br>以下目录结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pages&#x2F;</span><br><span class="line">--| _slug&#x2F;</span><br><span class="line">-----| comments.vue</span><br><span class="line">-----| index.vue</span><br><span class="line">--| users&#x2F;</span><br><span class="line">-----| _id.vue</span><br><span class="line">--| index.vue</span><br></pre></td></tr></table></figure>
<p>Nuxt.js生成对应的路由配置表为</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">router: &#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">'index'</span>,</span><br><span class="line">      path: <span class="string">'/'</span>,</span><br><span class="line">      component: <span class="string">'pages/index.vue'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">'users-id'</span>,</span><br><span class="line">      path: <span class="string">'/users/:id?'</span>,</span><br><span class="line">      component: <span class="string">'pages/users/_id.vue'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">'slug'</span>,</span><br><span class="line">      path: <span class="string">'/:slug'</span>,</span><br><span class="line">      component: <span class="string">'pages/_slug/index.vue'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">'slug-comments'</span>,</span><br><span class="line">      path: <span class="string">'/:slug/comments'</span>,</span><br><span class="line">      component: <span class="string">'pages/_slug/comments.vue'</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>你会发现名称为users-id的路由路径带有:id？参数，表示该路由是可选的。原理跟vue动态路由是一致的。<br>使用跳转的时候都是用nuxt-link或者this.$router.push({path:’’})，这样的话可以使用vuex</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">nuxt-link</span> <span class="attr">:to</span>=<span class="string">"'/users/' + id?name='四叶草'"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">nuxt-link</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="插件使用"><a href="#插件使用" class="headerlink" title="插件使用"></a>插件使用</h3><p>需要详细阅读官方文章： - <a href="https://zh.nuxtjs.org/guide/plugins" target="_blank" rel="noopener">https://zh.nuxtjs.org/guide/plugins</a><br>之前默认安装element 安装富文本，图片裁切 地图，boot栅格，可以使用vue add方法进行安装，也可以npm i -d …安装<br>安装方法安装富文本图片裁切：npm install -d vue-quill-editor quill vue-cropper<br>官网：<br>vue-quill-editor：<a href="https://quilljs.com/" target="_blank" rel="noopener">https://quilljs.com/</a><br>git：<a href="https://github.com/surmon-china/vue-quill-editor" target="_blank" rel="noopener">https://github.com/surmon-china/vue-quill-editor</a><br>vue-cropper：<a href="https://github.com/xyxiao001/vue-cropper" target="_blank" rel="noopener">https://github.com/xyxiao001/vue-cropper</a><br>需要在plugins文件夹内注册插件<br>注册插件：plugins文件夹内 新建js文件 - 例子：如果有导入的css的话，建议放到os上使用cdn进行引入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> VueQuillEditor <span class="keyword">from</span> <span class="string">'vue-quill-editor'</span></span><br><span class="line">Vue.use(VueQuillEditor)</span><br><span class="line"><span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string">需要nuxt.config.js内进行设置</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>shell</span><br><span class="line"><span class="comment">// nuxt.config.js</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="string">'@/plugins/element-ui'</span>,<span class="comment">//element</span></span><br><span class="line">    <span class="string">'@/plugins/api'</span>,<span class="comment">//封装的axios</span></span><br><span class="line">    <span class="string">'@/plugins/bootstrap-vue'</span>,<span class="comment">//栅格</span></span><br><span class="line">    <span class="string">'@/plugins/vue-moment'</span>,<span class="comment">//格式化时间</span></span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">'@/plugins/map'</span>, <span class="attr">ssr</span>: <span class="literal">false</span> &#125;,<span class="comment">//地图</span></span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">'@/plugins/vue-quill-editor'</span>, <span class="attr">ssr</span>: <span class="literal">false</span> &#125;,<span class="comment">//富文本</span></span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">'@/plugins/vue-cropper'</span>, <span class="attr">ssr</span>: <span class="literal">false</span> &#125;,<span class="comment">//裁切</span></span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">'@/plugins/md5'</span>, <span class="attr">ssr</span>: <span class="literal">false</span> &#125;<span class="comment">//md5加密</span></span><br><span class="line">  ],</span><br></pre></td></tr></table></figure>


<h3 id="新建一个isMobile-js文件，路径自选，我的路径是-static-js-isMobile-js"><a href="#新建一个isMobile-js文件，路径自选，我的路径是-static-js-isMobile-js" class="headerlink" title="新建一个isMobile.js文件，路径自选，我的路径是/static/js/isMobile.js"></a>新建一个isMobile.js文件，路径自选，我的路径是/static/js/isMobile.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"判断移动端"</span>);</span><br><span class="line">    <span class="keyword">var</span> sUserAgent = navigator.userAgent.toLowerCase();</span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/ipad|iphone|midp|rv:1.2.3.4|ucweb|android|windows ce|windows mobile/</span>.test(sUserAgent)) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"移动端"</span>);</span><br><span class="line">        <span class="comment">//跳转移动端页面</span></span><br><span class="line">        <span class="built_in">window</span>.location.replace(<span class="string">"xxxx"</span>);<span class="comment">//跳转后没有后退功能 </span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"PC端"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h3 id="在nuxt-config-js加上对应配置"><a href="#在nuxt-config-js加上对应配置" class="headerlink" title="在nuxt.config.js加上对应配置"></a>在nuxt.config.js加上对应配置</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">head: &#123;</span><br><span class="line">    script:[  </span><br><span class="line">      &#123;src:'js/isMobile.js'&#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>重新启动项目可以看到效果</p>
<h3 id="打包整理服务器端上线"><a href="#打包整理服务器端上线" class="headerlink" title="打包整理服务器端上线"></a>打包整理服务器端上线</h3><p>首先npm run dev 会生成一个dist和.nuxt文件，用到的是nuxt，nuxt.config.js，static，package.json四个文件<br>之后本地服务器端运行 npm start</p>
<h3 id="富文本安装和图片裁切-最好安装element"><a href="#富文本安装和图片裁切-最好安装element" class="headerlink" title="富文本安装和图片裁切 - 最好安装element"></a>富文本安装和图片裁切 - 最好安装element</h3><p>安装富文本quill 裁切图片：vue-cropper<br>npm install -d vue-quill-editor quill vue-cropper<br>在插件目录下全局引入 - 新建js文件，可以分开，可以合在一起<br>例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> VueQuillEditor <span class="keyword">from</span> <span class="string">'vue-quill-editor'</span></span><br><span class="line">Vue.use(VueQuillEditor)</span><br></pre></td></tr></table></figure>
<p>全局引用：nuxt.config.js配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">  <span class="string">'@/plugins/element-ui'</span>,</span><br><span class="line">  <span class="string">'@/plugins/bootstrap-vue'</span>,</span><br><span class="line">  &#123; <span class="attr">src</span>: <span class="string">'@/plugins/map'</span>, <span class="attr">ssr</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">src</span>: <span class="string">'@/plugins/vue-quill-editor'</span>, <span class="attr">ssr</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">src</span>: <span class="string">'@/plugins/vue-cropper'</span>, <span class="attr">ssr</span>: <span class="literal">false</span> &#125;</span><br><span class="line">],</span><br></pre></td></tr></table></figure>
<p>具体使用富文本 - nuxt使用富文本图片裁切以及element<br>图片裁切 - nuxt单个裁切图片和多个裁切</p>
<h3 id="百度地图的使用"><a href="#百度地图的使用" class="headerlink" title="百度地图的使用"></a>百度地图的使用</h3><p>安装vue-baidu-map</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vue-baidu-map -D</span><br></pre></td></tr></table></figure>
<p>在plugins新建map.js:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import BaiduMap from &#39;vue-baidu-map&#39;</span><br><span class="line">import Vue from &#39;vue&#39;</span><br><span class="line">Vue.use(BaiduMap, &#123;</span><br><span class="line">  ak: &#39;申请的百度地图密匙&#39;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>直接去 - Nuxt.js使用百度地图vue-baidu-map</p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2021-06-08T01:30:55.908Z" itemprop="dateUpdated">2021-06-08 09:30:55</time>
</span><br>


        
        文章连接：<a href="/A-lyc/2099/01/01/nuxt/nuxt%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85/" target="_blank" rel="external">https://a-lyc.github.io/2099/01/01/nuxt/nuxt%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85/</a>
        
    </div>
    
    <footer>
        <a href="https://a-lyc.github.io">
            <img src="/A-lyc/img/avatar.jpg" alt="四叶草">
            四叶草
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/A-lyc/tags/nuxt%E7%9A%84%E4%BD%BF%E7%94%A8-nuxt%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85/" rel="tag">nuxt的使用 nuxt的基本组件安装</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://a-lyc.github.io/2099/01/01/nuxt/nuxt%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85/&title=《nuxt的基本组件安装》 — 四叶草的个人博客&pic=https://a-lyc.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://a-lyc.github.io/2099/01/01/nuxt/nuxt%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85/&title=《nuxt的基本组件安装》 — 四叶草的个人博客&source=
中途的bug 一定熟练使用element有很大的帮助" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://a-lyc.github.io/2099/01/01/nuxt/nuxt%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《nuxt的基本组件安装》 — 四叶草的个人博客&url=https://a-lyc.github.io/2099/01/01/nuxt/nuxt%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85/&via=https://a-lyc.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://a-lyc.github.io/2099/01/01/nuxt/nuxt%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/A-lyc/2099/03/20/css/%E5%89%8D%E7%AB%AF%E5%B8%83%E5%B1%80%E7%A5%9E%E5%99%A8display-flex/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">前端布局神器display:flex</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/A-lyc/2021/06/08/%E8%B5%84%E6%BA%90/AE/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">详解-AE-如何将-png-序列帧导出为-SVGA-动画文件</h4>
      </a>
    </div>
  
</nav>



    











    <!-- Valine Comments -->
    <div class="comments vcomment" id="comments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail,link'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            el: '#comments',
            notify: 'false' == 'true',
            verify: 'false' == 'true',
            appId: "UCWNzvWWJh9L3h9gmx3ETORS-gzGzoHsz",
            appKey: "toGuOPfkaYMbDsW2atHP6cM2",
            avatar: "mm",
            placeholder: "Just go go",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->










</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/A-lyc/img/wechat.jpg" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/A-lyc/img/wechat.jpg" data-alipay="/A-lyc/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/A-lyc/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>四叶草 &copy; 2018 - 2021</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://a-lyc.github.io/2099/01/01/nuxt/nuxt%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85/&title=《nuxt的基本组件安装》 — 四叶草的个人博客&pic=https://a-lyc.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://a-lyc.github.io/2099/01/01/nuxt/nuxt%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85/&title=《nuxt的基本组件安装》 — 四叶草的个人博客&source=
中途的bug 一定熟练使用element有很大的帮助" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://a-lyc.github.io/2099/01/01/nuxt/nuxt%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《nuxt的基本组件安装》 — 四叶草的个人博客&url=https://a-lyc.github.io/2099/01/01/nuxt/nuxt%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85/&via=https://a-lyc.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://a-lyc.github.io/2099/01/01/nuxt/nuxt%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQ4AAAEOCAAAAABd2qZ5AAAD5klEQVR42u3aS27DMAwFwN7/0ukBCjvvkXLaAuNVkNayNF4w/Hx9xdfr4trc+3Odn5+vnnX1zdVqhy8cOHDgwLHY7tXD7r+/3/T9gXO+ZOX8jDhw4MCB4yxH8oD72JSseb/yLJDnHMnOceDAgQPH5zk2Afh+i8kT8wPjwIEDB47/xTEr7SXhM0m0ZkkdDhw4cOD4JEfeEJolcknBbpOS5cXNY7VSHDhw4MAxqbnV6dzf/PzIfAcOHDhw4IiTpTaJOpuGbULv5sKBAwcOHHuOpwt2ySHz0YScYHYuHDhw4MDxNMesqZO0o5KS4r6xlBcfiy4cDhw4cOAIOPajbLM20mZ4Ylb+q8uIOHDgwIGj5JilZLMkqk20NnzDnwU4cODAgeMoRxK68mPnDaQkbLc7mTWucODAgQPHnqNtyeRYbeNqM9CwTx2LQiEOHDhw4LjlaMfXWtcnynltE6t4Cg4cOHDgOMrRQtxvMS84boJ6/k20Gg4cOHDgWHPM2jb5EEN+jM2IQzuo94YSBw4cOHCsOdqQ+QquWZlvFnTbF1bMDOLAgQMHjpKjPcAsVRt2vUr6/K43bSccOHDgwLHgaMcU2uCXN5NmQbSNj3VxEAcOHDhwlBybJdok6tQQQ5KYDdfHgQMHDhxrjrbBMyvJzZLAzXjEav84cODAgWPBkSyXJ1E5Sv4a8vTvwLNw4MCBA8ehZ7WB6uzY3Obw+x8K0VgDDhw4cOCIOTYFwXwTp4qDs+GG4mXgwIEDB441x1XgbJO3dqSg/S0wG4zL//omH8WBAwcOHDHHbKAhl27bTi1i/sToLhw4cODAseZIwur+2ElQnDWTZgTDUTkcOHDgwDEaaMiHGzaBs20UJZ9XwXV/ABw4cODAEQ+9zbY+aw7l97aNqOTF4MCBAweOPUfUlRptvR3Cy5k24xRvElQcOHDgwLHm2By4mJhYHLIN7flrGKZzOHDgwIHjliO/rW0RtUFuRpwXIqPUFAcOHDhwrDlOBdc2hm/aTjOOYQqHAwcOHDhKjjy87dtLbQKWJ34t2eXrwYEDBw4chzjy4mC+rTbZGx4gDvBRCMeBAwcOHGuOWfnskTLcIs3LByOixA8HDhw4cCw4NiMLmxZUntTlR50F7GMTHDhw4MCBo7xmYSwp223GHfI0r/3RgAMHDhw4Nhx5cE1aUDlNO76Qh9i2yIgDBw4cOJ7g2AfCZIW2ODiDXq2PAwcOHDh+iaP9nyShainzImaxZxw4cODA8Sc59kN4bRK4T/Zw4MCBA8dZjlnQaockcpocej+6hwMHDhw4znK0ISov1eVNprP/mbS4NoVFHDhw4MBxsc435XSHKZXBqH8AAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/A-lyc/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '死鬼去哪里了！';
            clearTimeout(titleTime);
        } else {
            document.title = '(つェ⊂)咦!又好了!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
