---
title: 服务器部署
date: 2020-07-14 19:45:10
tags: nuxt服务器部署
category:
---
首先npm run build 打包生成.nuxt文件之后在本地进行测试，使用npm start进入环境进行测试看是否可以跑的通，有的时候会配置一个局域网访问的一个地址在package.json中
<!-- more -->
 ```json
  "config": {
    "nuxt": {
      "host": "0.0.0.0",
      "port": "3000"
    }
  }
```
配置这个是本地局域网可以访问，上线之前修改代理的地址为真是的地址，之后把打包后的.nuxt，static，nuxt.config.js，package.json给后端在服务器上进行渲染
首先配置后端服务器，PM2环境，
有的时候打开找不到js，：可能由于数据库的缓存原因，清除一下，有时候会设置7天的缓存时间清除之后，看是否被可以打开，打不开重装node，看npm有没有安装，
情况2：可能有asyncData上的axios请求有一个请求拦截，所有请求不到数据，这样可以使用标签解决请求不到数据问题，<cilent-only></cilent-only>包裹在内
还有就是在asyncData内请求的数据不要有拦截,如果要求有数据拦截的时候需要更换axios的方式
情况3：asyncData请求数据，并且还要添加拦截请求token需要配置中间件，在middleware这个中间件文件夹内配置一个文件这个是解析tookeis的token的可以解析成对象格式
```js
module.exports = require('cookie-parser')()
```
之后在nuxt.confige.js
中配置中间件插入的方式    
```js
serverMiddleware: ['~/middleware/cookie.js']
```

在api文件网络请求文件封装axios
```js


```


